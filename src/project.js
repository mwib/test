require=function c(e,t,n){function i(r,a){if(!t[r]){if(!e[r]){var s="function"==typeof require&&require;if(!a&&s)return s(r,!0);if(o)return o(r,!0);var p=new Error("Cannot find module '"+r+"'");throw p.code="MODULE_NOT_FOUND",p}var u=t[r]={exports:{}};e[r][0].call(u.exports,function(c){var t=e[r][1][c];return i(t?t:c)},u,u.exports,c,e,t,n)}return t[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)i(n[r]);return i}({App:[function(c,e,t){"use strict";cc._RFpush(e,"bc9772ZVeVM2omwSvP+kAar","App");var n={startGame:function(){}},i=["Util"];for(var o in i){var r=i[o];c(r)}e.exports=n,cc._RFpop()},{}],BackBtnCp:[function(c,e,t){"use strict";cc._RFpush(e,"3c5e9FYHD9LxZWZ39udQFni","BackBtnCp"),cc.Class({"extends":cc.Component,properties:{},onClick:function(){cc.director.loadScene("gameScene")},onLoad:function(){}}),cc._RFpop()},{}],BgRandomMove:[function(c,e,t){"use strict";function n(c,e,t){return e in c?Object.defineProperty(c,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):c[e]=t,c}cc._RFpush(e,"2efffJ1hlRMy6NEHp7IMcJi","BgRandomMove");var i;cc.Class({"extends":cc.Component,properties:(i={},n(i,"X轴移动距离",1),n(i,"y轴移动距离",1),n(i,"移动速度(单位：像素/秒)",20),n(i,"随机量",10),i),randomMove:function(){var c=cc.pLength(cc.p(this["X轴移动距离"],this["y轴移动距离"]))/this["移动速度(单位：像素/秒)"],e=cc.pMult(cc.pNormalize(cc.p(cc.randomMinus1To1(),cc.randomMinus1To1())),this["随机量"]),t=cc.pAdd(cc.p(this["X轴移动距离"],this["y轴移动距离"]),e),n=cc.repeatForever(cc.sequence(cc.moveBy(c,t),cc.moveBy(c,cc.pMult(t,-1))));this.node.runAction(n)},onLoad:function(){this.randomMove()}}),cc._RFpop()},{}],ButtonControl:[function(c,e,t){"use strict";function n(c,e,t){return e in c?Object.defineProperty(c,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):c[e]=t,c}cc._RFpush(e,"c2d5bVI67ZPAq8U5jXlmGwC","ButtonControl"),cc.Class({"extends":cc.Component,properties:n({},"音效",{"default":null,url:cc.AudioClip}),onClick:function(){cc.audioEngine.playEffect(this["音效"])},onLoad:function(){}}),cc._RFpop()},{}],GameData:[function(c,e,t){"use strict";function n(c,e,t){return e in c?Object.defineProperty(c,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):c[e]=t,c}cc._RFpush(e,"f90693GTmlGS7T5fknnDNTy","GameData"),cc.Class({"extends":cc.Component,properties:n({},"分数",0),onLoad:function(){}}),cc._RFpop()},{}],InitLBXFrame:[function(c,e,t){"use strict";function n(c,e,t){return e in c?Object.defineProperty(c,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):c[e]=t,c}cc._RFpush(e,"73810un/L9B+7ptubQfLvHy","InitLBXFrame");var i,o=[[0,1,2,3,4],[5,6,7,8,9,10],[11,12,13,14,15,16,17],[18,19,20,21,22,23,24,25],[26,27,28,29,30,31,32,33,34],[35,36,37,38,39,40,41,42],[43,44,45,46,47,48,49],[50,51,52,53,54,55],[56,57,58,59,60],[26,35,43,50,56],[18,27,36,44,51,57],[11,19,28,37,45,52,58],[5,12,20,29,38,46,53,59],[0,6,13,21,30,39,47,54,60],[1,7,14,22,31,40,48,55],[2,8,15,23,32,41,49],[3,9,16,24,33,42],[4,10,17,25,34],[0,5,11,18,26],[1,6,12,19,27,35],[2,7,13,20,28,36,43],[3,8,14,21,29,37,44,50],[4,9,15,22,30,38,45,51,56],[10,16,23,31,39,46,52,57],[17,24,32,40,47,53,58],[25,33,41,48,54,59],[34,42,49,55,60]],r=(c("Util"),0);cc.Class({"extends":cc.Component,properties:(i={},n(i,"bianchanggezishu",5),n(i,"liubianxingH",0),n(i,"liubianxingA",0),n(i,"framePic",{"default":null,type:cc.SpriteFrame}),n(i,"bian",{"default":null,type:cc.SpriteFrame}),n(i,"xiaochuSound",{"default":null,url:cc.AudioClip}),n(i,"shuPrefab",{"default":null,type:cc.Prefab}),n(i,"boomEffPrefab",{"default":null,type:cc.Prefab}),n(i,"tipPrefab",{"default":null,type:cc.Prefab}),i),checkXC:function(c){this.addScore(this.curFKLen,!0);var e=cc.instantiate(this.tipPrefab);e.color=cc.color(211,70,50,255);var t=e.getComponent(cc.Label);t.string="+"+this.getAddScoreCal(this.curFKLen,!0),this.node.addChild(e);for(var n=[],i=0;i<this.frameList.length;i++)this.frameList[i].isHaveFK&&n.push(this.frameList[i].FKIndex);n.sort(function(c,e){return c-e});for(var r=[],i=0;i<o.length;i++){var a=o[i],s=this.get2AryIntersect(n,a);if(s.length>0){var p=this.check2AryIsEqual(a,s);p&&(cc.log("消！！"),r.push(a),cc.audioEngine.playEffect(this.xiaochuSound))}}for(var u=[],h=0,i=0;i<r.length;i++)for(var l=r[i],d=0;d<l.length;d++){var f=l[d];u.push(cc.callFunc(function(){var c=arguments[1][0],e=arguments[1][1],t=cc.instantiate(this.boomEffPrefab);this.frameList[c].addChild(t);var n=cc.instantiate(this.tipPrefab),i=n.getComponent(cc.Label);i.string="+"+this.getAddScoreCal(e),this.frameList[c].addChild(n)},this,[f,h])),u.push(cc.callFunc(function(){var c=arguments[1];this.frameList[c].isHaveFK=null;var e=this.frameList[c].getChildByName("colorSpr");e&&(e.cascadeOpacity=!0,e.runAction(cc.sequence(cc.spawn(cc.scaleTo(.5,2),cc.fadeOut(.5)),cc.removeSelf(!0))))},this,f)),u.push(cc.delayTime(.05)),h++}if(u.length>0){u.push(cc.callFunc(function(){this.isDeleting=!1,this.checkIsLose()},this)),this.isDeleting=!0;var g=cc.sequence(u);this.node.runAction(g),this.addScore(h)}},checkIsLose:function(){if(!this.isDeleting){for(var c=0,e=0;e<3;e++){var t=cc.find("Canvas/getNewFK"+(e+1)),n=t.getComponent("NewLBXKuai");n.checkIsLose()?(c++,t.opacity=125):t.opacity=255}if(3==c){var i=cc.instantiate(this.shuPrefab);this.node.parent.addChild(i),cc.log("保存历史最高分");var o=cc.sys.localStorage.getItem("score");o<r&&cc.sys.localStorage.setItem("score",r)}}},addScore:function(c,e){var t=this.getAddScoreCal(c,e),n=cc.find("Canvas/score/scoreLabel"),i=n.getComponent(cc.Label);i.string=t+Number(i.string),r=Number(i.string)},getAddScoreCal:function(c,e){var t=c+1,n=e?t:2*t*t;return n},get2AryIntersect:function(c,e){for(var t=[],n=0;n<c.length;n++)for(var i=0;i<e.length;i++)e[i]==c[n]&&t.push(e[i]);return t},check2AryIsEqual:function(c,e){for(var t=0;t<c.length;t++)if(e[t]!=c[t])return!1;return!0},onLoad:function(){for(var c=cc.p(this.node.x,this.node.y),e=(2*this.bianchanggezishu-1,[{count:5,srcPos:cc.p(0,0)},{count:6,srcPos:cc.p(2*this.liubianxingH,0)},{count:7,srcPos:cc.p(2*this.liubianxingH*2,0)},{count:8,srcPos:cc.p(2*this.liubianxingH*3,0)},{count:9,srcPos:cc.p(2*this.liubianxingH*4,0)},{count:8,srcPos:cc.p(2*this.liubianxingH*4+this.liubianxingH,-3*this.liubianxingA/2)},{count:7,srcPos:cc.p(2*this.liubianxingH*4+2*this.liubianxingH,-3*this.liubianxingA*2/2)},{count:6,srcPos:cc.p(2*this.liubianxingH*4+3*this.liubianxingH,-3*this.liubianxingA*3/2)},{count:5,srcPos:cc.p(2*this.liubianxingH*4+4*this.liubianxingH,-3*this.liubianxingA*4/2)}]),t=cc.pMult(cc.pForAngle(240*(2*Math.PI/360)),2*this.liubianxingH),n=cc.pMult(cc.pForAngle(120*(2*Math.PI/360)),2*this.liubianxingH*4),i=[],o=[],r=0;r<e.length;r++)for(var a=e[r].count,s=cc.pAdd(e[r].srcPos,n),p=cc.pAdd(c,s),u=0;u<a;u++){var h=cc.pAdd(p,cc.pMult(t,u));o.push(h)}for(var l=0;l<o.length;l++){var d=new cc.Node("frame"),f=d.addComponent(cc.Sprite);f.spriteFrame=this.framePic,d.x=o[l].x,d.y=o[l].y,d.parent=this.node,d.FKIndex=l;var g=new cc.Node("bianSpr"),m=g.addComponent(cc.Sprite);m.spriteFrame=this.bian,g.active=!1,g.parent=d,i.push(d)}this.frameList=i,this.posList=e,this.isDeleting=!1,this.node.on("succDropDownOne",this.checkXC,this);var d=cc.find("Canvas/highScore/scoreLabel"),v=d.getComponent(cc.Label);v.string=cc.sys.localStorage.getItem("score")||0}}),cc._RFpop()},{Util:"Util"}],LoadCp:[function(c,e,t){"use strict";cc._RFpush(e,"1e722mUEcZHqq0Plb9cwFF7","LoadCp"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){cc.log("开始加载资源"),cc.view.enableRetina(!1),cc.myAssets={};for(var c=["pics","prefabs","fonts","anims"],e=0,t=0;t<c.length;t++)cc.loader.loadResAll(c[t],function(t,n,i){cc.myAssets[c[t]]=i,cc.log("资源加载完成"+e),e++,e>=c.length&&cc.director.loadScene("startScene")}.bind(this,t))}}),cc._RFpop()},{}],NewLBXKuai:[function(c,e,t){"use strict";function n(c,e,t){return e in c?Object.defineProperty(c,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):c[e]=t,c}cc._RFpush(e,"7f7eecsfeNLxL7pMDgXTdAA","NewLBXKuai");var i,o=c("InitLBXFrame"),r=c("Util"),a=.7;cc.Class({"extends":cc.Component,properties:(i={checkerboard:{"default":null,type:o}},n(i,"Kcount",3),n(i,"liubianxingH",0),n(i,"liubianxingA",0),n(i,"kuaiTex",{"default":null,type:cc.SpriteFrame}),n(i,"color1",{"default":null,type:cc.SpriteFrame}),n(i,"color2",{"default":null,type:cc.SpriteFrame}),n(i,"color3",{"default":null,type:cc.SpriteFrame}),n(i,"color4",{"default":null,type:cc.SpriteFrame}),n(i,"anSound",{"default":null,url:cc.AudioClip}),n(i,"fangxiaSound1",{"default":null,url:cc.AudioClip}),n(i,"fangxiaSound2",{"default":null,url:cc.AudioClip}),n(i,"fangxiaSound3",{"default":null,url:cc.AudioClip}),n(i,"canNotSound1",{"default":null,url:cc.AudioClip}),n(i,"canNotSound2",{"default":null,url:cc.AudioClip}),i),getTheConfig:function(){var c=this.liubianxingA,e=this.liubianxingH,t=[[cc.p(0,0)],[cc.p(0,0),cc.p(2*e,0)],[cc.p(0,0),cc.p(e,1.5*c)],[cc.p(0,0),cc.p(e,1.5*-c)],[cc.p(0,0),cc.p(2*e,0),cc.p(4*e,0)],[cc.p(0,0),cc.p(2*e,0),cc.p(3*e,1.5*c)],[cc.p(0,0),cc.p(2*e,0),cc.p(3*e,1.5*-c)],[cc.p(0,0),cc.p(2*e,0),cc.p(e,1.5*c)],[cc.p(0,0),cc.p(2*e,0),cc.p(e,1.5*-c)],[cc.p(0,0),cc.p(e,1.5*c),cc.p(3*e,1.5*c)],[cc.p(0,0),cc.p(e,1.5*c),cc.p(2*e,3*c)],[cc.p(0,0),cc.p(e,1.5*c),cc.p(0,3*c)],[cc.p(0,0),cc.p(e,1.5*-c),cc.p(3*e,1.5*-c)],[cc.p(0,0),cc.p(e,1.5*-c),cc.p(2*e,3*-c)],[cc.p(0,0),cc.p(e,1.5*-c),cc.p(0,3*-c)],[cc.p(0,0),cc.p(2*e,0),cc.p(4*e,0),cc.p(6*e,0)],[cc.p(0,0),cc.p(2*e,0),cc.p(4*e,0),cc.p(5*e,1.5*c)],[cc.p(0,0),cc.p(2*e,0),cc.p(4*e,0),cc.p(5*e,1.5*-c)],[cc.p(0,0),cc.p(2*e,0),cc.p(4*e,0),cc.p(3*e,1.5*c)],[cc.p(0,0),cc.p(2*e,0),cc.p(4*e,0),cc.p(3*e,1.5*-c)],[cc.p(0,0),cc.p(2*e,0),cc.p(3*e,1.5*c),cc.p(e,1.5*c)],[cc.p(0,0),cc.p(2*e,0),cc.p(3*e,1.5*c),cc.p(2*e,3*c)],[cc.p(0,0),cc.p(2*e,0),cc.p(3*e,1.5*c),cc.p(4*e,3*c)],[cc.p(0,0),cc.p(2*e,0),cc.p(3*e,1.5*c),cc.p(5*e,1.5*c)],[cc.p(0,0),cc.p(2*e,0),cc.p(3*e,1.5*-c),cc.p(e,1.5*-c)],[cc.p(0,0),cc.p(2*e,0),cc.p(3*e,1.5*-c),cc.p(2*e,3*-c)],[cc.p(0,0),cc.p(2*e,0),cc.p(3*e,1.5*-c),cc.p(4*e,3*-c)],[cc.p(0,0),cc.p(2*e,0),cc.p(3*e,1.5*-c),cc.p(5*e,1.5*-c)],[cc.p(0,0),cc.p(2*e,0),cc.p(e,1.5*-c),cc.p(-e,1.5*-c)],[cc.p(0,0),cc.p(2*e,0),cc.p(e,1.5*-c),cc.p(0,3*-c)],[cc.p(0,0),cc.p(2*e,0),cc.p(e,1.5*-c),cc.p(2*e,3*-c)],[cc.p(0,0),cc.p(e,1.5*-c),cc.p(2*e,3*-c),cc.p(3*e,4.5*-c)],[cc.p(0,0),cc.p(-e,1.5*-c),cc.p(2*-e,3*-c),cc.p(3*-e,4.5*-c)]];return t},newOneK:function(c){var e=new cc.Node("colorSpr"),t=e.addComponent(cc.Sprite);t.spriteFrame=this["color"+c];var n=new cc.Node("wenliSpr"),i=n.addComponent(cc.Sprite);return i.spriteFrame=this.kuaiTex,n.parent=e,e},newOneNode:function(){for(var c=new cc.Node("kuai"),e=this.getTheConfig(),t=r.random(0,e.length-1),n=e[t],t=r.random(1,4),i=0,o=0,s=0,p=0,u=0;u<n.length;u++){var h=n[u],l=this.newOneK(t);l.x=h.x,i+=l.x,o++,l.y=h.y,s+=l.y,p++,c.addChild(l)}return c.x=-i/o,c.y=-s/p,c.setScale(a),c},addTouchEvent:function(){var c=100,e=this;this.node.ox=this.node.x,this.node.oy=this.node.y,this.node.on(cc.Node.EventType.TOUCH_START,function(){this.y+=c,this.getChildByName("kuai").setScale(1),cc.audioEngine.playEffect(e.anSound)},this.node),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(c){var t=c.touch.getDelta();this.x+=t.x,this.y+=t.y,e.collisionFunc(),e.checkIsCanDrop()?e.changeColorDeal():e.changeColorDeal(!0)},this.node),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(c){this.dropDownFunc()},this),this.node.on(cc.Node.EventType.TOUCH_END,function(c){this.dropDownFunc()},this)},changeColorDeal:function(c){for(var e=0;e<this.checkerboard.frameList.length;e++){var t=this.checkerboard.frameList[e].getChildByName("bianSpr");t.active=!1}if(!c)for(var e=0;e<this.checkFrameList.length;e++){var t=this.checkFrameList[e].getChildByName("bianSpr");t.active=!0}},collisionFunc:function(){this.checkFrameList=[],this.checkFKlist=[];for(var c=this.node.children[0].children,e=0;e<c.length;e++){var t=cc.pAdd(cc.p(this.node.children[0].x,this.node.children[0].y),cc.p(c[e].x,c[e].y)),n=cc.pAdd(this.node.position,t),i=this.checkPosFunc(n);i&&(this.checkFKlist.push(c[e]),this.checkFrameList.push(i))}},checkPosFunc:function(c){for(var e=27,t=0;t<this.checkerboard.frameList.length;t++){var n=this.checkerboard.frameList[t],i=cc.pDistance(cc.p(n.x,n.y),c);if(i<=e)return n}},checkIsLose:function(){for(var c=0,e=this.node.children[0].children,t=0;t<this.checkerboard.frameList.length;t++){var n=this.checkerboard.frameList[t],i=cc.p(n.x,n.y),o=1;if(!n.isHaveFK){for(var r=1;r<e.length;r++)for(var a=27,s=cc.pAdd(i,cc.p(e[r].x,e[r].y)),p=0;p<this.checkerboard.frameList.length;p++){var u=this.checkerboard.frameList[p],h=cc.pDistance(cc.p(u.x,u.y),s);h<=a&&!u.isHaveFK&&o++}o==e.length&&c++}}return 0==c},checkIsCanDrop:function(){if(0==this.checkFrameList.length||this.checkFrameList.length!=this.node.children[0].children.length)return!1;for(var c=0;c<this.checkFrameList.length;c++)if(this.checkFrameList[c].isHaveFK)return!1;return!0},dropDownFunc:function(){if(r.testCode1(),!this.checkIsCanDrop())return this.takeBack(),void cc.audioEngine.playEffect(this.canNotSound1);for(var c=0;c<this.checkFKlist.length;c++){this.checkFKlist[c].x=0,this.checkFKlist[c].y=0,this.checkFKlist[c].parent=this.checkFrameList[c],this.checkFrameList[c].isHaveFK=!0;var e=new cc.Node("guangEffNode"),t=e.addComponent(cc.Sprite);t.spriteFrame=this.checkerboard.bian,this.checkFrameList[c].addChild(e,-1);var n=cc.repeatForever(cc.sequence(cc.spawn(cc.fadeOut(1),cc.scaleTo(1,1.2)),cc.removeSelf()));e.runAction(n)}this.node.removeAllChildren();var i=this.newOneNode();this.node.addChild(i),this.checkerboard.curFKLen=this.checkFKlist.length,this.checkerboard.node.emit("succDropDownOne");var o=r.random(1,3);cc.audioEngine.playEffect(this["fangxiaSound"+o]),this.takeBack(),this.checkerboard.checkIsLose(),r.testCode2()},takeBack:function(){this.checkFrameList=[],this.changeColorDeal(),this.node.getChildByName("kuai").setScale(a),this.node.x=this.node.ox,this.node.y=this.node.oy},onLoad:function(){this.checkFrameList=[],this.checkFKlist=[],this.node.cascadeOpacity=!0;var c=this.newOneNode();this.node.addChild(c),this.addTouchEvent()}}),cc._RFpop()},{InitLBXFrame:"InitLBXFrame",Util:"Util"}],ScoreBtnCp:[function(c,e,t){"use strict";cc._RFpush(e,"fa093eyq9ROGJnwYLEn4xRL","ScoreBtnCp"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){}}),cc._RFpop()},{}],StartBtnCp:[function(c,e,t){"use strict";function n(c,e,t){return e in c?Object.defineProperty(c,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):c[e]=t,c}cc._RFpush(e,"7d9dd4jmi9I7Z1fgVPHfEXS","StartBtnCp"),cc.Class({"extends":cc.Component,properties:n({},"游戏界面",{"default":null,type:cc.Prefab}),onClick:function(){var c=(this.node.parent,cc.sequence(cc.scaleTo(.2,0),cc.callFunc(function(){cc.log("开始游戏"),cc.director.loadScene("gameScene"),this.node.destroy()},this))),e=this.getComponent(cc.Animation);e.stop(),this.node.runAction(c)},onLoad:function(){}}),cc._RFpop()},{}],TipCp:[function(c,e,t){"use strict";cc._RFpush(e,"2da59+FgkRFGqzGIbcv57tI","TipCp"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){this.node.x=0,this.node.y=0,this.node.runAction(cc.sequence(cc.spawn(cc.fadeOut(1),cc.moveBy(1,cc.p(0,100))),cc.removeSelf(!0)))}}),cc._RFpop()},{}],Util:[function(c,e,t){"use strict";cc._RFpush(e,"1f57fJXW/5MwpzGE2th5qGE","Util");var n={printObj:function(c){var e="";for(var t in c)e+=" function "==typeof c[t]?t+" \n ":t+" \n ";cc.log(e)},random:function(c,e){return Math.floor(Math.random()*(e-c+1)+c)},testCode1:function(){this.start=(new Date).getTime()},testCode2:function(){this.end=(new Date).getTime();var c=this.end-this.start+"ms";cc.log("此处花时间："+c)}};e.exports=n,cc._RFpop()},{}],ZIndexSet:[function(c,e,t){"use strict";cc._RFpush(e,"0f727RVfzZIHZgekF5A2mIS","ZIndexSet"),cc.Class({"extends":cc.Component,properties:{zIndex:0},onLoad:function(){this.node.zIndex=this.zIndex}}),cc._RFpop()},{}]},{},["ZIndexSet","LoadCp","Util","TipCp","BgRandomMove","BackBtnCp","InitLBXFrame","StartBtnCp","NewLBXKuai","App","ButtonControl","ScoreBtnCp","GameData"]);